{
  "detected_issues": [
    {
      "file": "models.py",
      "issue": "timestamp default incorrectly called",
      "cause": "Code used datetime.utcnow() which is evaluated at import time, causing all rows to share same timestamp",
      "fix": "Change to default=datetime.utcnow (pass callable, not its result)"
    },
    {
      "file": "models.py",
      "issue": "missing foreign key on Post.user_id",
      "cause": "user_id was a plain Integer column, so no referential integrity was enforced",
      "fix": "Use db.ForeignKey('user.id') and set nullable=False"
    },
    {
      "file": "models.py",
      "issue": "missing relationship backref between User and Post",
      "cause": "User.posts was missing backref, preventing Post.author access",
      "fix": "Use db.relationship('Post', backref='author', lazy='dynamic')"
    }
  ],
  "recommendations": [
    "Use callable defaults for SQLAlchemy Column defaults to ensure runtime evaluation",
    "Always declare ForeignKey for relational columns to ensure integrity",
    "Add backrefs or explicit relationships on both sides for convenience",
    "Add tests that run against a fresh SQLite in-memory DB to validate behavior"
  ]
}
